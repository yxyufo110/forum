<my-nav-bar title="个人" showLeft="{{false}}" showTabs="{{false}}" />
<view wx:if="{{!hasUserInfo}}" style="margin-top:200px;text-align:center">
	<van-button type="primary" open-type="getUserInfo" bind:getuserinfo="getUserInfo">获取用户信息
	</van-button>
</view>
<scroll-view wx:if="{{hasUserInfo}}" scroll-y="true" style="height:{{isIPX ? 'calc(100vh - 114px - 44pt)' : 'calc(100vh - 114px)'}}">
	<view style="content: '';height:1px; overflow: hidden;" />
	<view class="userBox">
		<view class="userinfo">
			<image class="avatar" src="{{userInfo.avatarUrl}}" mode="cover" />
			<view class="nameBox">
				<text class="nickname">{{userInfo.username}}</text>
				<text class="tips">每天进步多一点， 越努力，越幸运</text>
			</view>
		</view>

		<view class="itemBox">
			<view class="item" bindtap="goEdit">
				<image src="../../static/images/my2.png" class="itemImg" />
				<view class="itemTitle">
					个人资料
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>

			<view class="item" bindtap="goRecord">
				<image src="../../static/images/my1.png" class="itemImg" />
				<view class="itemTitle">
					学习记录
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>
			<van-button
			 bind:getphonenumber="getPhone"
			 open-type="getPhoneNumber"
			 custom-style="border:none;background:#ffffff;height:auto;width:100%;padding:0"
			>
				<view class="item">
					<image src="../../static/images/tel.png" class="itemImg" />
					<view class="itemTitle">
						{{userInfo && userInfo.phoneNum ? '更新号码' : '绑定号码'}} 
					</view>
					<view class="itemArrow" style="font-size:15px">
						{{ userInfo && userInfo.phoneNum}}
						<van-icon name="arrow" />
					</view>
				</view>
			</van-button>

		</view>

		<view class="itemBox">
			<view class="item" bindtap="goOrder">
				<image src="../../static/images/my7.png" class="itemImg" />
				<view class="itemTitle">
					我的订单
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>
			<view class="item" bindtap="goWalet">
				<image src="../../static/images/my5.png" class="itemImg" />
				<view class="itemTitle">
					我的钱包
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>
		</view>

		<view class="itemBox">
			<view class="item" bindtap="goShare">
				<image src="../../static/images/my6.png" class="itemImg" />
				<view class="itemTitle">
					我的分享
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>
			<view class="item" bindtap="goCollect">
				<image src="../../static/images/my4.png" class="itemImg" />
				<view class="itemTitle">
					我的收藏
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>
			<view class="item" bindtap="goNotice">
				<image src="../../static/images/my3.png" class="itemImg" />
				<view class="itemTitle">
					我的消息
				</view>
				<view class="itemArrow">
					<van-icon name="arrow" />
				</view>
			</view>
			<view class="item" bindtap="share">
				<image src="../../static/images/my8.png" class="itemImg" />
				<view class="itemTitle">
					邀请朋友
				</view>
				<view class="itemArrow">
					{{userInfo && userInfo.invitations || 0}}人
					<van-icon name="arrow" />
				</view>
			</view>
		</view>

	</view>
	<van-dialog
  use-slot
  show="{{ show }}"
  show-cancel-button
  bind:close="onClose"
	bind:confirm="onConfirm"
	confirmButtonText="保存到相册"
>
  <image src="{{imgUrl}}" style="width:100%;height:260px"/>
</van-dialog>
</scroll-view>

